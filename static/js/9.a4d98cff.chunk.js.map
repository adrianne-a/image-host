{"version":3,"sources":["components/bg.jpg","components/Result.js","components/Uploader.js","components/Start.js","components/Welcome.js","pages/Home.js"],"names":["module","exports","Wrapper","styled","div","ImageWrapper","Image","img","ImageDiv","ImageText","ImageTextName","ImageTextSize","AdjustmentSize","InputSize","input","ResultLink","InputLink","Input","ZoomInOutlinedStyled","ZoomInOutlined","View","CopyOutlinedStyled","CopyOutlined","Result","observer","ref","ImageStore","useStores","ref1","useRef","ref2","store","useLocalStore","width","setWidth","height","setHeight","serverFile","attributes","url","widthStr","heightStr","refURL","refHTML","refMarkdown","copyLink","method","copy","current","state","value","message","success","AlreadyCopyText","src","filename","file","size","toFixed","target","href","fullStr","rel","onChange","console","log","placeholder","content","trigger","onClick","handleMarkdown","Dragger","Upload","H1","h2","PageHeader","PageBody","DraggerStyle","Component","UserStore","props","showUploadList","beforeUpload","setFile","setFilename","name","currentUser","warning","test","type","error","upload","then","catch","className","tip","spinning","isUpoading","InboxOutlined","beat","keyframes","A","a","Start","history","useHistory","push","ArrowRightOutlined","Title","p","SubTitle","Container","CancelStyle","Welcome","sectionStyle","backgroundImage","bg","style","Home","Uploader"],"mappings":"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","file":"static/js/9.a4d98cff.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.689ed875.jpg\";","import React, { useRef } from 'react';\nimport styled from 'styled-components'\nimport { observer, useLocalStore } from 'mobx-react';\nimport { Input, Popover, message } from 'antd';\nimport { CopyOutlined, ZoomInOutlined } from '@ant-design/icons';\nimport copy from 'copy-to-clipboard';\nimport { useStores } from '../stores'\n\n\nconst Wrapper = styled.div`\n    margin-top: 30px;\n    border: 1px dashed #ccc;\n    padding: 20px;\n    border-radius:6px;\n    display:flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n`;\nconst ImageWrapper = styled.div`\n    margin: 20px 30px;\n    border: 1px solid rgba(0,0,0,.2);\n    box-shadow: 0 0 10px 0 rgb(0 0 0 / 20%);\n    padding: 6px;\n    max-width:227px;\n    max-height:300px;\n    flex-direction:row;\n`\nconst Image = styled.img`\n    max-width: 100%;\n    max-height:100%;\n    display:block;\n    margin:auto;\n`;\nconst ImageDiv = styled.div`\n    width: 213px;\n    height: 160px;\n`\nconst ImageText = styled.div`\ndisplay: block;\n    text-align: center;\n    padding-top: 4px;\n    font-size: 11px;\n    color: #777;\n    max-height:70px;\n    margin-bottom: 14px;\n    \n`\nconst ImageTextName = styled.div`\n    display: block;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: 160px;\n    margin:auto;\n`\nconst ImageTextSize = styled.div`\n    display: block;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: 160px;\n    margin:auto;\n`\nconst AdjustmentSize = styled.div`\n    text-align:right;\n    position:relative;\n`\nconst InputSize = styled.input`\n    border:1px solid #6e757c;\n    border-radius: 3px;\n    margin-bottom:5px;\n    max-width:110px;\n    outline:none;\n    &:focus{\n        border:1px solid #95bee6;\n        box-shadow: 0 0 6px #95bee6;\n    }\n    \n`\n//link\n\nconst ResultLink = styled.div`\n    margin-right:30px;\n    margin-top:20px;\n`\nconst InputLink = styled(Input)`\n    width: 500px;\n`\nconst ZoomInOutlinedStyled = styled(ZoomInOutlined)`\n    font-size:24px;\n    color:#353a3f;\n`\nconst View = styled.div`\n    position:absolute;\n    top:43%;\n    left:4%;\n \n`\nconst CopyOutlinedStyled = styled(CopyOutlined)`\n    padding:5px 5px 5px 5px;\n`\n\nconst Result = observer(() => {\n    const { ImageStore } = useStores();\n    const ref1 = useRef();\n    const ref2 = useRef();\n\n    const bindWidthChange = () => {\n        console.log('bindWidthChange...')\n        console.log(ref1.current.value)\n        store.setWidth(ref1.current.value);\n    };\n\n    const bindHeightChange = () => {\n        store.setHeight(ref2.current.value);\n    };\n    const store = useLocalStore(() => ({\n        width: null,\n        setWidth(width) {\n            store.width = width;\n        },\n        get widthStr() {\n            return store.width ? `/w/${store.width}` : '';\n        },\n        height: null,\n        setHeight(height) {\n            store.height = height;\n        },\n        get heightStr() {\n            return store.height ? `/h/${store.height}` : '';\n        },\n        get fullStr() {\n            //?imageView2/0/w/800/h/400)\n            return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\n        }\n\n    }));\n\n\n    const refURL = useRef(null);\n    const refHTML = useRef(null);\n    const refMarkdown = useRef(null);\n\n    const copyLink = (ref, method) => {\n        return () => {\n            if (method === 'URL') {\n                copy(ref.current.state.value);\n                message.success('拷贝URL成功!');\n            } else if (method === 'HTML') {\n                copy(`<img src=\"${ref.current.state.value}\" alt=\"\"/>`);\n                message.success('拷贝HTML成功!');\n            } else if (method === 'Markdown') {\n                copy(`![](${ref.current.state.value})`);\n                message.success('拷贝Markdown成功!');\n            }\n        }\n    }\n\n\n    const handleHTML = (ref) => {\n        return `<img src=\"${ref}\" alt=\"\"/>`\n    };\n    const handleMarkdown = (ref) => {\n        return `![](${ref})`;\n    };\n\n    const AlreadyCopyText = (\n        <p>已复制</p>\n    );\n\n    return (\n        <Wrapper>\n            <ImageWrapper>\n                <ImageDiv>\n                    <Image src={ImageStore.serverFile.attributes.url.attributes.url} />\n                </ImageDiv>\n                <ImageText>\n                    <ImageTextName>{ImageStore.filename}</ImageTextName>\n\n                    <ImageTextSize>\n                        {`(${((ImageStore.file.size) / 1024).toFixed(2)})KB`}\n                        {/* {\"(\" + ((ImageStore.file.size) / 1024).toFixed(2) + \")\" + \"KB\"} */}\n                    </ImageTextSize>\n\n                </ImageText>\n\n                <AdjustmentSize>\n                    <View><a\n                        target=\"_blank\"\n                        href={store.fullStr}\n                        rel=\"noopener noreferrer\"\n                    ><ZoomInOutlinedStyled /></a></View>\n\n                    <InputSize ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度（可选）\" />\n                    <InputSize ref={ref2} onChange={bindHeightChange} placeholder=\"最大高度（可选）\" />\n                </AdjustmentSize>\n\n            </ImageWrapper>\n            <ResultLink>\n                <ul>\n                    <li><h3>结果链接</h3></li>\n                    <li>\n                        <h4>URL:</h4>\n                        <InputLink value={store.fullStr} ref={refURL}></InputLink>\n                        <Popover content={AlreadyCopyText} trigger=\"click\" onClick={copyLink(refURL, \"URL\")}>\n\n                            <CopyOutlinedStyled />\n                        </Popover>\n\n                    </li>\n                    <li>\n                        <h4>HTML:</h4>\n                        <InputLink value={handleHTML(store.fullStr)} ref={refHTML}></InputLink>\n                        <Popover content={AlreadyCopyText} trigger=\"click\" onClick={copyLink(refURL, \"HTML\")}>\n                            <CopyOutlinedStyled />\n                        </Popover>\n                    </li>\n                    <li>\n                        <h4>Markdown:</h4>\n                        <InputLink value={handleMarkdown(store.fullStr)} ref={refMarkdown}></InputLink>\n                        <Popover content={AlreadyCopyText} trigger=\"click\" onClick={copyLink(refURL, \"Markdown\")}>\n                            <CopyOutlinedStyled />\n                        </Popover>\n                    </li>\n                </ul>\n            </ResultLink>\n\n        </Wrapper>\n    )\n});\n\nexport default Result;","import React from 'react';\nimport { useStores } from '../stores';\nimport { observer } from 'mobx-react';\nimport { Upload, message, Spin } from 'antd';\nimport { InboxOutlined } from '@ant-design/icons';\nimport styled from 'styled-components';\nimport Result from './Result';\n\nconst { Dragger } = Upload;\n\n\nconst H1 = styled.h2`\n  margin:0 0 6px 0;\n  // text-align: center;\n`;\n\nconst PageHeader = styled.div`\n    padding-bottom: 9px;\n    margin: 10px 0 20px;\n    border-bottom: 1px solid #eee;\n`\nconst PageBody = styled.div`\n    border:1px solid #ddd;\n    border-radius:6px;\n    padding:12px 12px 12px 12px;\n`\nconst DraggerStyle = styled(Dragger)`\n    \n`\n\n\n\nconst Component = observer(() => {\n  const { ImageStore, UserStore } = useStores();\n  // const ref1 = useRef();\n  // const ref2 = useRef();\n\n\n\n\n  const props = {\n    showUploadList: false,\n    beforeUpload: file => {\n      ImageStore.setFile(file);\n      ImageStore.setFilename(file.name);\n      if (UserStore.currentUser === null) {\n        message.warning('请先登录再上传！');\n        return false;\n      }\n      if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\n        message.error('只能上传png/svg/jpg/gif格式的图片');\n        return false;\n      }\n      if (file.size > 1024 * 1024) {\n        message.error('图片最大1M');\n        return false;\n      }\n      ImageStore.upload()\n        .then((serverFile) => {\n          console.log('上传成功')\n          console.log(serverFile);\n        }).catch(() => {\n          console.log('上传失败')\n        });\n      return false;\n    }\n  };\n\n  return (\n    <div>\n      <PageHeader className=\"page-header\" >\n        <H1>上传图片</H1>\n        图片最大1M\n      </PageHeader>\n      <PageBody>\n        <Spin tip=\"上传中\" spinning={ImageStore.isUpoading}>\n          <DraggerStyle {...props}>\n            <p className=\"ant-upload-drag-icon\">\n              <InboxOutlined />\n            </p>\n            <p className=\"ant-upload-text\">点击或者拖拽图片上传</p>\n            <p className=\"ant-upload-hint\">\n              只能上传svg, png, jpg, jpeg, gif格式的文件, 图片最大1M\n            </p>\n          </DraggerStyle>\n        </Spin>\n      </PageBody>\n\n      {\n        ImageStore.serverFile ?\n          <Result url={ImageStore.serverFile.attributes.url.attributes.url} />\n          : null\n      }\n    </div>\n  );\n});\nexport default Component;","import React from 'react'\nimport styled, { keyframes } from 'styled-components'\nimport { ArrowRightOutlined } from '@ant-design/icons'\nimport { useHistory } from 'react-router-dom'\n\n\nconst beat = keyframes`\n    0% {\n        transform: scale(1);\n    }\n    50% {\n        transform: scale(1.1);\n    }\n    100% {\n        transform: scale(1);\n    }\n    `\n\nconst A = styled.a`\n        display: inline-block;\n        font-size: 20px;\n        animation: ${beat} 2000ms 700ms 2;\n        transition: all 1s;\n        :hover{\n            transform: scale(1.1);\n        }\n    `\n\nexport default function Start() {\n\n\n    const history = useHistory();\n    const handleClick = () => {\n        history.push('/login');\n    }\n\n    return (\n        <>\n            <A onClick={handleClick}><ArrowRightOutlined />&nbsp;&nbsp;&nbsp;开始使用</A>\n        </>\n    )\n}\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport styled from \"styled-components\";\nimport bg from './bg.jpg';\nimport Start from './Start';\n\n\nconst Title = styled.p`\n        font-size: 70px;\n        letter-spacing: 40px;\n        line-height: 90px;\n        margin-bottom: 0.5em;\n        color:#fff;\n    `\n\nconst SubTitle = styled.p`\n        font-size: 30px;\n        line-height: 65px;\n        letter-spacing: 10px;\n        color: #9e9e9e;\n    `\n\nconst Container = styled.div`\n        display: flex;\n        flex-direction: column;\n        align-items: center; \n        height: calc(100vh - 102px);\n        justify-content: center;\n         \n        background-repeat: no-repeat;\n        background-size:100%;\n        background-attachment: fixed;\n        background-size: cover;\n\n        \n    `\nconst CancelStyle = styled.div`\n    filter:alpha(opacity=90);-moz-opacity:0.9; -khtml-opacity: 0.9;opacity: 0.9;\n    `\n\nconst Welcome = observer(() => {\n\n    let sectionStyle = {\n        backgroundImage: `url(${bg})`\n    };\n\n    return (\n        <CancelStyle>\n            <Container style={sectionStyle}>\n                <Title >ImageHost\n                </Title>\n                <SubTitle>一个简单的图床</SubTitle>\n                <Start />\n            </Container>\n        </CancelStyle>\n    )\n})\n\nexport default Welcome;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { useStores } from '../stores';\nimport Uploader from '../components/Uploader';\nimport Welcome from '../components/Welcome';\n// import Tips from '../components/Tips';\n\nconst Home = observer(() => {\n  const { UserStore } = useStores();\n\n  // const User = () => <div>Hello {UserStore.currentUser.attribures.username} </div>\n\n  return (\n    <>\n      {UserStore.currentUser ? <div className='pad'> <Uploader /></div> : <Welcome />}\n    </>\n  );\n});\n\nexport default Home;"],"sourceRoot":""}