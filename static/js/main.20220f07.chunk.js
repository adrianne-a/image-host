(this["webpackJsonpreact-epic-teach"]=this["webpackJsonpreact-epic-teach"]||[]).push([[4],{113:function(e,t,n){e.exports=n(164)},118:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),i=n.n(a),c=(n(118),n(15)),l=n(16),u=n(31),s=n(21),p=n(59),f=n(166),b=n(60);function m(){var e=Object(c.a)(["\n  margin-left: 10px;\n  background-color: #353a3f;\n  border:1px solid #fff;\n  color:#fff;\n  &:hover{\n    background-color: #fff;\n    border:1px solid #353a3f;\n    color:#353a3f;\n  }\n  &:focus{\n    background-color: #fff;\n    border:1px solid #353a3f;\n    color:#353a3f;\n  }\n\n"]);return m=function(){return e},e}function h(){var e=Object(c.a)(["\n  margin-left: auto;\n  color:#fff;\n"]);return h=function(){return e},e}function g(){var e=Object(c.a)(["\n  color: #727579;\n  margin-left: 30px;\n  font-weight:500;\n\n  &.active {\n    color:#ffffff;\n  }\n  \n"]);return g=function(){return e},e}function y(){var e=Object(c.a)(["\n  color:#fff;\n  font-size:1.25rem;\n  font-weight:500;\n"]);return y=function(){return e},e}function O(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 160px;\n  background-color: #353a3f;\n  -webkit-animation: dJVbz 1500ms ease;\n  animation: dJVbz 1500ms ease;\n"]);return O=function(){return e},e}var d=l.a.header(O()),v=l.a.a(y()),j=Object(l.a)(u.b)(g()),w=l.a.div(h()),U=Object(l.a)(f.a)(m()),E=Object(p.a)((function(){var e=Object(s.f)(),t=Object(b.a)(),n=t.UserStore,a=t.AuthStore;return Object(r.useEffect)((function(){n.pullUser()}),[]),o.a.createElement(d,null,o.a.createElement(v,null,"ImageHost"),o.a.createElement("nav",null,o.a.createElement(j,{to:"/",activeClassName:"active",className:"list-group-item",exact:!0},"\u9996\u9875"),o.a.createElement(j,{to:"/history",activeClassName:"active",className:"list-group-item"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(j,{to:"/about",activeClassName:"active",className:"list-group-item"},"\u5173\u4e8e\u6211")),o.a.createElement(w,null,n.currentUser?o.a.createElement(o.a.Fragment,null,"Hi,",n.currentUser.attributes.username," ",o.a.createElement(U,{type:"primary",onClick:function(){a.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(U,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),e.push("/login")}},"\u767b\u5f55"),o.a.createElement(U,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c"))))})),k=n(170),P=n(171);function z(){var e=Object(c.a)(["\n  color: #aaa;\n  margin: 15px;\n    :hover{\n        color: #40a9ff;\n    }\n"]);return z=function(){return e},e}function x(){var e=Object(c.a)(["\n  padding: 14px 100px;\n  text-align: center;\n  font-size: 15px;\n  color: #aaa;\n  background-color:#f5f5f5;\n  height:50px;\n"]);return x=function(){return e},e}var F=l.a.footer(x()),D=l.a.a(z());var S=function(){return o.a.createElement(F,null,o.a.createElement(D,{href:"https://github.com/adrianne-a",target:"_blank"},o.a.createElement(k.a,null)),o.a.createElement(D,null,"@\xa0Adrianne"),o.a.createElement(D,{href:"https://www.yuque.com/adrianne-a",target:"_blank"}," ",o.a.createElement(P.a,null)))};function C(){return o.a.createElement("div",null,"Loading...")}console.log(C);var I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(7),n.e(9)]).then(n.bind(null,405))})),N=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(8),n.e(12)]).then(n.bind(null,407))})),L=Object(r.lazy)((function(){return n.e(11).then(n.bind(null,399))})),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(10)]).then(n.bind(null,400))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(13)]).then(n.bind(null,406))}));var V=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(C,null)},o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",exact:!0,component:I}),o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"pad"},o.a.createElement(s.a,{path:"/history",component:N}),o.a.createElement(s.a,{path:"/about",component:L}),o.a.createElement(s.a,{path:"/login",component:H}),o.a.createElement(s.a,{path:"/register",component:A})))))),o.a.createElement(S,null))};n(160),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(161);i.a.render(o.a.createElement(u.a,null,o.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(0),o=n(7),a=n(19),i=n(20),c=n(2),l=(n(38),n(1)),u=n(168),s=n(11),p=n.n(s);p.a.init({appId:"KZH2gZRBBs227CVW1IX6RN5F-gzGzoHsz",appKey:"3ilZntc1dnNLC8FVF2Gw4xVa",serverURL:"https://kzh2gzrb.lc-cn-n1-shared.com"});var f,b,m=function(e,t){var n=new s.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},h=function(e,t){return console.log("------"),console.log(e,t),new Promise((function(n,r){s.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},g=function(){s.User.logOut()},y=function(){return s.User.current()},O={add:function(e,t){var n=new p.a.Object("Image"),r=new p.a.File(t,e);return n.set("filename",t),n.set("owner",s.User.current()),console.log(s.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,a=new p.a.Query("Image");return a.include("owner"),a.limit(o),a.skip(n*o),a.descending("createdAt"),a.equalTo("owner",p.a.User.current()),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Uploader=O;var d,v,j,w,U,E,k,P,z,x,F,D,S=new(f=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"currentUser",b,this)}return Object(i.a)(e,[{key:"pullUser",value:function(){this.currentUser=y()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(c.a)(f.prototype,"currentUser",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(f.prototype,"pullUser",[l.action],Object.getOwnPropertyDescriptor(f.prototype,"pullUser"),f.prototype),Object(c.a)(f.prototype,"resetUser",[l.action],Object.getOwnPropertyDescriptor(f.prototype,"resetUser"),f.prototype),f),C=new(d=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"filename",v,this),Object(o.a)(this,"file",j,this),Object(o.a)(this,"isUpoading",w,this),Object(o.a)(this,"serverFile",U,this)}return Object(i.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUpoading=!0,this.serverFile=null,new Promise((function(t,n){O.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){console.error("\u4e0a\u4f20\u5931\u8d25"),u.a.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUpoading=!1}))}))}},{key:"reset",value:function(){this.isUpoading=!1,this.serverFile=null}}]),e}(),v=Object(c.a)(d.prototype,"filename",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=Object(c.a)(d.prototype,"file",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(c.a)(d.prototype,"isUpoading",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object(c.a)(d.prototype,"serverFile",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(d.prototype,"setFilename",[l.action],Object.getOwnPropertyDescriptor(d.prototype,"setFilename"),d.prototype),Object(c.a)(d.prototype,"setFile",[l.action],Object.getOwnPropertyDescriptor(d.prototype,"setFile"),d.prototype),Object(c.a)(d.prototype,"upload",[l.action],Object.getOwnPropertyDescriptor(d.prototype,"upload"),d.prototype),Object(c.a)(d.prototype,"reset",[l.action],Object.getOwnPropertyDescriptor(d.prototype,"reset"),d.prototype),d),I=new(E=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"list",k,this),Object(o.a)(this,"isLoading",P,this),Object(o.a)(this,"hasMore",z,this),Object(o.a)(this,"page",x,this),this.limit=10}return Object(i.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,O.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){console.log(e),u.a.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),k=Object(c.a)(E.prototype,"list",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=Object(c.a)(E.prototype,"isLoading",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(c.a)(E.prototype,"hasMore",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=Object(c.a)(E.prototype,"page",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(E.prototype,"append",[l.action],Object.getOwnPropertyDescriptor(E.prototype,"append"),E.prototype),Object(c.a)(E.prototype,"find",[l.action],Object.getOwnPropertyDescriptor(E.prototype,"find"),E.prototype),Object(c.a)(E.prototype,"reset",[l.action],Object.getOwnPropertyDescriptor(E.prototype,"reset"),E.prototype),E),N=new(F=function(){function e(){Object(a.a)(this,e),Object(o.a)(this,"values",D,this)}return Object(i.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){h(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){S.resetUser(),u.a.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){m(e.values.username,e.values.password).then((function(e){S.pullUser(),t(e)})).catch((function(e){S.resetUser(),u.a.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){g(),S.resetUser(),I.reset(),C.reset()}}]),e}(),D=Object(c.a)(F.prototype,"values",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(F.prototype,"setUsername",[l.action],Object.getOwnPropertyDescriptor(F.prototype,"setUsername"),F.prototype),Object(c.a)(F.prototype,"setPassword",[l.action],Object.getOwnPropertyDescriptor(F.prototype,"setPassword"),F.prototype),Object(c.a)(F.prototype,"login",[l.action],Object.getOwnPropertyDescriptor(F.prototype,"login"),F.prototype),Object(c.a)(F.prototype,"register",[l.action],Object.getOwnPropertyDescriptor(F.prototype,"register"),F.prototype),Object(c.a)(F.prototype,"logout",[l.action],Object.getOwnPropertyDescriptor(F.prototype,"logout"),F.prototype),F),L=Object(r.createContext)({AuthStore:N,UserStore:S,ImageStore:C,HistoryStore:I});window.stores={AuthStore:N,UserStore:S,ImageStore:C,HistoryStore:I};var H=function(){return Object(r.useContext)(L)}}},[[113,5,6]]]);
//# sourceMappingURL=main.20220f07.chunk.js.map